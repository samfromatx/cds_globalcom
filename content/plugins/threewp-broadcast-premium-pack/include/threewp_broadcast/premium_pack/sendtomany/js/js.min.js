jQuery(document).ready(function(a){window.broadcast_sendtomany={$button:null,$button_container:null,$cancel_button:null,$meta_box_window:null,post_ids:null,$send_to_many_button:null,$tablenav:null,button_clicked:function(){this.close_meta_box();var b="";var c=a("#posts-filter tbody#the-list th.check-column input:checked");a.each(c,function(f,g){var e=a(g);var d=a(g).parentsUntil("tr").parent();if(a("div.linked_from",d).length>0){return}var h=d.prop("id").replace("post-","");b+=","+h});if(b.length<1){alert(window.broadcast_sendtomany_data.strings.no_posts_selected);return}this.post_ids=b;this.open_meta_box()},close_meta_box:function(){if(this.$meta_box_window===null){return}this.$meta_box_window.remove();this.$meta_box_window=null;this.$button.show()},open_meta_box:function(){this.$button.hide();var b=a("#posts-filter");this.$meta_box_window=a("<div />").append('<br class="clear"/>').append(window.broadcast_sendtomany_data.strings.loading).prependTo(b).prop("id","threewp_broadcast");a.ajax({data:{action:window.broadcast_sendtomany_data.actions.get_meta_box,post_ids:this.post_ids,},dataType:"json",error:function(c){alert("Error opening Send To Many box: "+JSON.stringify(c))},type:"post",url:ajaxurl,success:function(f){var d='<div id="threewp_broadcast" class="postbox clear"><div class="inside">'+f.html+"</div></div>";window.broadcast_sendtomany.$meta_box_window.html(d);var c=a("head");a.each(f.css,function(g,h){c.append("<link rel='stylesheet' href='"+h+"' type='text/css' media='all'>")});var e=a("body");a.each(f.js,function(g,h){e.append('<script type="text/javascript" src="'+h+'"/>')});window.broadcast_sendtomany.$meta_box_window.$send_to_many_button=a("input#send_to_many",window.broadcast_sendtomany.$meta_box_window).click(function(g){g.preventDefault();return window.broadcast_sendtomany.send_to_many()});window.broadcast_sendtomany.$meta_box_window.$cancel_button=a("input#cancel_send_to_many",window.broadcast_sendtomany.$meta_box_window).click(function(g){g.preventDefault();return window.broadcast_sendtomany.close_meta_box()})},})},send_to_many:function(){var b=new Array();var c=a("#plainview_sdk_form2_inputs_checkboxes_blogs input.checkbox:checked");a.each(c,function(e,f){var g=a(f).prop("value");b.push(g)});if(b.length<1){alert(window.broadcast_sendtomany_data.strings.no_blogs_selected);return}this.$meta_box_window.$send_to_many_button.prop("disabled",true).prop("value",window.broadcast_sendtomany_data.strings.sending);this.$meta_box_window.$cancel_button.prop("disabled",true);$form=a("form",this.$meta_box_window);var d=$form.serialize()+"&"+a.param({action:window.broadcast_sendtomany_data.actions.send_to_many,post_ids:this.post_ids,});a.ajax({data:d,dataType:"json",error:function(e){alert("Error sending Send To Many command: "+JSON.stringify(e))},type:"post",url:ajaxurl,success:function(e){window.broadcast_sendtomany.close_meta_box();a("#post-query-submit",this.$tablenav).click()},})},init:function(){this.$tablenav=a("#posts-filter .tablenav.top");if(this.$tablenav.length<1){return}this.$button_container=a("<div />").addClass("alignleft").addClass("actions").insertBefore(a("br.clear",this.$tablenav));this.$button=a("<button />").addClass("button").click(function(b){b.preventDefault();return window.broadcast_sendtomany.button_clicked()}).html(window.broadcast_sendtomany_data.strings.send_to_many).appendTo(this.$button_container)}};broadcast_sendtomany.init()});